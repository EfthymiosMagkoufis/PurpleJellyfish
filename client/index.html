<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
    <!-- <meta name="mobile-web-app-capable" content="yes"> -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>PurpleJellyfish</title>
    <link rel="icon" type="image/x-icon" href="./img/jellyfish_icon.ico">
  </head>
  <link  href='style.css'  rel='stylesheet'/>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.css" rel="stylesheet">
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" type="text/css">
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.1/mapbox-gl.js"></script>
  <script src="https://kit.fontawesome.com/81a905b0b2.js" crossorigin="anonymous"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <body>
      <nav>
        <img src="./img/jellyfish.jpg" class="brand-img">
        <a id="brand" href="/">PurpleJellyfish</a>
        <button type="button" name="button" class="nav-btns" id="add-com"><i class="fas fa-plus"></i>Observation</button>
      </nav>
      <div class="container">
        <div id="loading-animation">
          <div id="loading-background">
            <h1 id="loading-txt">PurpleJellyfish loading ...</h1>
          </div>
          <svg id="loading" style="margin:auto;background:transparent;display:block;" width="220px" height="220px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
            <circle cx="50" cy="50" r="0" fill="none" stroke="#7930b1" stroke-width="2">
            <animate attributeName="r" repeatCount="indefinite" dur="1.36986301369863s" values="0;30" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"></animate>
            <animate attributeName="opacity" repeatCount="indefinite" dur="1.36986301369863s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"></animate>
            </circle><circle cx="50" cy="50" r="0" fill="none" stroke="#a75fdb" stroke-width="2">
            <animate attributeName="r" repeatCount="indefinite" dur="1.36986301369863s" values="0;30" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.684931506849315s"></animate>
            <animate attributeName="opacity" repeatCount="indefinite" dur="1.36986301369863s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.684931506849315s"></animate>
            </circle>
          </svg>
        </div>
        <div class="map" id="map"></div>
        <div class="controlers">
          <div class="vis-controler">
            <a class="vis-btns" id="heatmap-btn">Heatmap</a>
            <label class="switch">
              <input type="checkbox" checked id="vis-switch">
              <span class="slider round"></span>
            </label>
            <a class="vis-btns" id="cluster-btn">Clusters</a>
          </div>
          <div class="timelapse-controler">
            <div class="timelapse">
              <button type="button" class="play-pause" id="play"><i class="fa fa-play" aria-hidden="true"></i></button>
              <button type="button" class="play-pause" id="pause"><i class="fa fa-pause" aria-hidden="true"></i></button>
              <button type="button" class="play-pause" id="stop"><i class="fa fa-stop" aria-hidden="true"></i></button>
              <input type="text" class="timelapse-date" id="timelapse-date" disabled>
              <i class="fa fa-chevron-down" aria-hidden="true" title="open time period tab"></i>
              <i class="fa fa-chevron-up" aria-hidden="true"  title="close time period tab"></i>
              <br><span class="timelapse-text" id="timelapse-text"></span>
            </div>
          </div>
          <div class="timelapse-info">
            <label id="from-label" for="from">from</label>
            <input type='date' placeholder='yyyy-mm-dd' id='from' name='beginPosition' min='' max='' >
            <label id="to-label" for="to">to</label>
            <input type='date' placeholder='yyyy-mm-dd' id='to' name='endPosition' min='' max='' >
            <br><span class="timelapse-text" id="timelapse-info-text"></span>
          </div>
        </div>
        <div class="select-tab">
          <i class="fa fa-times" aria-hidden="true" id="comment-stab-close"></i>
          <button type="button" class="select-btn" id="loc-on-map">Select a place on map</button>
          <button type="button" class="select-btn" id="geo-loc">Use my location</button>
        </div>
        <div class="comment-form">
          <i class="fa fa-times" aria-hidden="true" id="comment-form-close"></i>
          <div class="form-title">Describe your observation here!</div>
          <form>
              <textarea type="text" id="your-name" name="y-name" placeholder="nickname" resize="none"></textarea>
              <textarea type="text" id="your-comment" name="y-com" placeholder="comment..."></textarea>
              <label id="date-label" for="y-date">Observation Date</label>
              <input type="date" id="your-date" name="y-date"></input>
              <!-- <div class="choose_img">
                  <span>Upoload an image <i class="fa fa-camera" aria-hidden="true"></i></span>
                  <input name="Select img" type="file"  accept="image/*" id="img-upload"/>
              </div> -->
              <button type="button" name="upload" id="upload-btn">Upload</button>
          </form>
        </div>
        <button type="button" name="button" class="extra-map-btns" id="info-btn" title="About"><i class="fa fa-info-circle" aria-hidden="true"></i></button>
        <button type="button" name="button" class="extra-map-btns" id="download-btn" title="Download data"><a id="download-btn-a" style="color:#333333" > <i class="fa fa-download" aria-hidden="true"></i></a></button>
        <div class="chart-area">
        <canvas  id="line-chart"></canvas>
        </div>
      </div>
      <div class="info-background"></div>
      <div class="info-tab">
        <div class="info-header">
          <h1 id="info-header">Welcome to <br>PurpleJellyfish</h1>
        </div>
        <div class="info-content">
          PurpleJellyfish is an web-based geo-application that depicts the appearance of the purple jellyfish in the Greek seas. The data used was obtained from <a style="color:#a75fdb" class="about-links" href="https://www.inaturalist.org/" target="_blank"> Naturalist.org</a> as well as PurpleJellyfish users.
          The user has the ability to watch the spread of purple jellyfish in the Greek seas using the tool timelapse geovisualizations, as well as the ability to add personal observations about the appearance of purple jellyfish.
          For the implementation of this website were used: node.js, express, postgreSQL and mapbox GL JS.
          <br><br>Developed by Magkoufis Efthymios, Rural and Surveying Engineer - Geoinformatics Engineer of NTUA.
          <br>contact: <a  style="color:#a75fdb" href="mailto:themismagf@yahoo.gr">themismagf@yahoo.gr</a>
          <br><br>Copyright 2022 <i style="color:#a75fdb"  class="fa fa-copyright" aria-hidden="true"></i> Magkoufis Efthymios.  All rights reserved.
        </div>
        <div class="info-footer">
          <button type="button" id="close-info-btn">Close</button>
        </div>
      </div>
  </body>
  <!-- <script src="./load_data.js"></script> -->
  <script src="./src/api.js"></script>
  <script src="./src/app.js"></script>
  <script src="./src/listeners.js"></script>
  <script src="./src/cluster.js"></script>
  <script src="./src/heatmap.js"></script>
</html>
